<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quran Platform | منصة القرآن</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        :root {
            --emerald-dark: #064e3b;
            --card-bg: #cbd5e1; /* لون غامق للبطاقات */
        }
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f1f5f9;
            user-select: none;
        }
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 10px;
        }
        .icon-card {
            background-color: var(--card-bg);
            border-radius: 16px;
            height: 110px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid #94a3b8;
            cursor: pointer;
            transition: 0.2s;
        }
        .icon-card:active { transform: scale(0.95); }
        .icon-circle {
            width: 42px;
            height: 42px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            color: var(--emerald-dark);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        /* Mushaf Styling */
        .mushaf-viewport {
            background: white;
            max-width: 100%;
            margin: auto;
            border-radius: 12px;
            position: relative;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .mushaf-img {
            width: 100%;
            height: auto;
            display: block;
        }
        /* Player styling */
        .player-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 55px;
            background: var(--emerald-dark);
            color: white;
            display: flex;
            align-items: center;
            padding: 0 15px;
            z-index: 100;
        }
        .video-box {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            border-radius: 12px;
            overflow: hidden;
            background: #000;
            margin-bottom: 15px;
        }
        .video-box iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
        }
        .hidden { display: none; }
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--emerald-dark);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="bg-[#064e3b] p-3 sticky top-0 z-50 border-b-2 border-amber-500 shadow-lg">
        <div class="max-w-lg mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2" onclick="showSec('home')">
                <i class="fa-solid fa-mosque text-amber-400 text-xl"></i>
                <div>
                    <h1 class="text-white font-bold text-md leading-none">Quran Platform</h1>
                    <p class="text-[9px] text-amber-200 mt-0.5">صدقه عن جميع المسلمين</p>
                </div>
            </div>
            <button onclick="showSec('home')" class="text-white text-xs font-bold bg-emerald-800 px-3 py-1 rounded">الرئيسية</button>
        </div>
    </header>

    <main class="max-w-lg mx-auto p-3 pb-24">
        
        <!-- Home Section -->
        <section id="home-sec">
            <div class="text-center my-4">
                <h2 class="text-emerald-900 font-black text-lg">بوابة الخدمات الإسلامية</h2>
            </div>
            <div class="icon-grid">
                <!-- الاذاعة اول واحدة -->
                <div onclick="showSec('radios')" class="icon-card">
                    <div class="icon-circle"><i class="fa-solid fa-radio"></i></div>
                    <span class="font-bold text-xs">إذاعة القرآن</span>
                </div>
                <div onclick="showSec('visuals')" class="icon-card">
                    <div class="icon-circle"><i class="fa-solid fa-tv"></i></div>
                    <span class="font-bold text-xs">المحتوى المرئي</span>
                </div>
                <div onclick="showSec('mushaf')" class="icon-card">
                    <div class="icon-circle"><i class="fa-solid fa-book-open"></i></div>
                    <span class="font-bold text-xs">المصحف</span>
                </div>
                <div onclick="showSec('reciters')" class="icon-card">
                    <div class="icon-circle"><i class="fa-solid fa-microphone"></i></div>
                    <span class="font-bold text-xs">القراء</span>
                </div>
                <div onclick="showSec('azkar')" class="icon-card">
                    <div class="icon-circle"><i class="fa-solid fa-heart"></i></div>
                    <span class="font-bold text-xs">الأذكار</span>
                </div>
                <a href="https://t.me/QuranDaily_1" target="_blank" class="icon-card">
                    <div class="icon-circle text-blue-500"><i class="fa-brands fa-telegram"></i></div>
                    <span class="font-bold text-xs">تليجرام</span>
                </a>
            </div>
        </section>

        <!-- Radios Section -->
        <section id="radios-sec" class="hidden">
            <h3 class="font-bold text-emerald-900 mb-3 border-r-4 border-emerald-900 pr-2">إذاعات البث المباشر</h3>
            <div id="radioList" class="space-y-2"></div>
        </section>

        <!-- Visuals Section (LIVE TV) -->
        <section id="visuals-sec" class="hidden">
            <h3 class="font-bold text-emerald-900 mb-4 text-center">بث مباشر للقنوات الإسلامية</h3>
            
            <div class="mb-4">
                <p class="text-[10px] font-bold mb-1 text-slate-500">قناة القرآن الكريم (مباشر من مكة)</p>
                <div class="video-box">
                    <iframe src="https://www.youtube.com/embed/m7H606S7-mY?rel=0" frameborder="0" allowfullscreen></iframe>
                </div>
            </div>

            <div class="mb-4">
                <p class="text-[10px] font-bold mb-1 text-slate-500">قناة المجد للقرآن الكريم</p>
                <div class="video-box">
                    <iframe src="https://www.youtube.com/embed/XW7_T95z5fM?rel=0" frameborder="0" allowfullscreen></iframe>
                </div>
            </div>
        </section>

        <!-- Mushaf Section -->
        <section id="mushaf-sec" class="hidden">
            <div class="mushaf-viewport">
                <div id="mLoader" class="spinner absolute"></div>
                <!-- Robust Image Source -->
                <img id="mImg" src="https://images.quran.com/images/mushaf/p1.png" class="mushaf-img" onload="mLoaded()" onerror="mError()">
            </div>
            <div class="flex items-center justify-between mt-4 bg-white p-2 rounded-xl shadow">
                <button onclick="navPage(1)" class="bg-emerald-800 text-white px-4 py-2 rounded-lg text-xs font-bold">التالي</button>
                <div class="text-xs font-bold">صفحة: <input type="number" id="pNum" value="1" min="1" max="604" onchange="goPage()" class="w-10 border-b border-emerald-900 text-center outline-none"></div>
                <button onclick="navPage(-1)" class="bg-emerald-800 text-white px-4 py-2 rounded-lg text-xs font-bold">السابق</button>
            </div>
        </section>

        <!-- Azkar Section -->
        <section id="azkar-sec" class="hidden">
            <div class="grid grid-cols-2 gap-3 mb-6">
                <button onclick="loadAzkar('morning')" class="p-4 bg-amber-100 border border-amber-300 rounded-xl font-bold text-amber-900 text-sm">أذكار الصباح</button>
                <button onclick="loadAzkar('evening')" class="p-4 bg-indigo-100 border border-indigo-300 rounded-xl font-bold text-indigo-900 text-sm">أذكار المساء</button>
            </div>
            <div id="azkarContent" class="space-y-2"></div>
        </section>

        <!-- Reciters Section -->
        <section id="reciters-sec" class="hidden">
            <input type="text" onkeyup="searchR(this.value)" placeholder="ابحث عن قارئ..." class="w-full p-2 mb-3 border rounded-lg text-sm outline-none">
            <div id="rList" class="grid grid-cols-2 gap-2"></div>
        </section>

    </main>

    <!-- Small Player -->
    <div class="player-footer shadow-2xl">
        <button onclick="togglePly()" id="plyBtn" class="w-9 h-9 bg-white text-emerald-900 rounded-full flex items-center justify-center shrink-0">
            <i class="fa-solid fa-play ml-0.5"></i>
        </button>
        <div class="mr-3 overflow-hidden">
            <div id="trackT" class="text-[10px] font-bold truncate">بانتظار التشغيل...</div>
        </div>
        <audio id="player"></audio>
    </div>

    <script>
        const audio = document.getElementById('player');
        const pBtn = document.getElementById('plyBtn');
        let pg = 1;
        let reciters = [];

        const dataAzkar = {
            morning: ["أَصْبَحْنَا وَأَصْبَحَ المُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ.","آية الكرسي.","سورة الإخلاص (3 مرات).","سورة الفلق (3 مرات).","سورة الناس (3 مرات).","بِسْمِ اللَّهِ الَّذِي لاَ يَضُرُّ مَعَ اسْمِهِ شَيْءٌ فِي الأَرْضِ وَلاَ فِي السَّمَاءِ."],
            evening: ["أَمْسَيْنَا وَأَمْسَى المُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ.","آية الكرسي.","سورة الإخلاص (3 مرات).","سورة الفلق (3 مرات).","سورة الناس (3 مرات).","أَعُوذُ بِكَلِمَاتِ اللهِ التَّامَّاتِ مِنْ شَرِّ مَا خَلَقَ."]
        };

        window.onload = () => {
            getRadios();
            getReciters();
            showSec('home');
        };

        function showSec(id) {
            ['home', 'radios', 'visuals', 'mushaf', 'azkar', 'reciters'].forEach(s => {
                document.getElementById(s + '-sec').classList.add('hidden');
            });
            document.getElementById(id + '-sec').classList.remove('hidden');
            if(id === 'mushaf') updateM();
            window.scrollTo(0,0);
        }

        // Mushaf Logic
        function updateM() {
            document.getElementById('mLoader').classList.remove('hidden');
            document.getElementById('mImg').src = `https://images.quran.com/images/mushaf/p${pg}.png`;
            document.getElementById('pNum').value = pg;
        }
        function mLoaded() { document.getElementById('mLoader').classList.add('hidden'); }
        function mError() {
            const img = document.getElementById('mImg');
            if(!img.src.includes('archive.org')) {
                img.src = `https://archive.org/download/quran-images-v2/${pg}.png`;
            }
        }
        function navPage(s) {
            let n = pg + s;
            if(n >= 1 && n <= 604) { pg = n; updateM(); }
        }
        function goPage() {
            let v = parseInt(document.getElementById('pNum').value);
            if(v >= 1 && v <= 604) { pg = v; updateM(); }
        }

        // Audio Logic
        function play(url, title) {
            audio.src = url;
            document.getElementById('trackT').innerText = title;
            audio.play();
            pBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
        }
        function togglePly() {
            if(!audio.src) return;
            if(audio.paused) { audio.play(); pBtn.innerHTML = '<i class="fa-solid fa-pause"></i>'; }
            else { audio.pause(); pBtn.innerHTML = '<i class="fa-solid fa-play ml-0.5"></i>'; }
        }

        // APIs
        async function getRadios() {
            const res = await fetch('https://mp3quran.net/api/v3/radios?language=ar');
            const d = await res.json();
            document.getElementById('radioList').innerHTML = d.radios.map(r => `
                <div class="bg-white p-3 rounded-xl flex justify-between items-center shadow-sm border border-slate-100" onclick="play('${r.url}', '${r.name}')">
                    <span class="text-xs font-bold">${r.name}</span>
                    <i class="fa-solid fa-circle-play text-emerald-800 text-lg"></i>
                </div>
            `).join('');
        }

        async function getReciters() {
            const res = await fetch('https://mp3quran.net/api/v3/reciters?language=ar');
            const d = await res.json();
            reciters = d.reciters;
            drawR(reciters.slice(0, 20));
        }

        function drawR(list) {
            document.getElementById('rList').innerHTML = list.map(r => `
                <div class="bg-slate-300 p-2 rounded-xl text-center border border-slate-400" onclick="play('${r.moshaf[0].server}001.mp3', 'سورة الفاتحة - ${r.name}')">
                    <span class="text-[10px] font-bold">${r.name}</span>
                </div>
            `).join('');
        }

        function searchR(q) {
            const f = reciters.filter(r => r.name.includes(q));
            drawR(f.slice(0, 20));
        }

        function loadAzkar(t) {
            document.getElementById('azkarContent').innerHTML = dataAzkar[t].map(z => `
                <div class="bg-white p-3 rounded-xl border-r-4 border-emerald-900 shadow-sm text-sm leading-relaxed">${z}</div>
            `).join('');
        }
    </script>
</body>
</html> 
